flowchart TB
    Client[Client Request]
    Pingora[Pingora Reverse Proxy]
    
    subgraph Backend[MultiTier Storage Backend]
        L0[L0: In-Process Cache<br/>Fast • Small • 2MB gate<br/>TinyLFU/LRU]
        L1[L1: Distributed Cache Redis<br/>Fast • Medium • 64MB gate<br/>Network RTT ~1-5ms]
        L2[L2: Mid-Latency Cache<br/>Medium • Large • No gate<br/>Network RTT ~10-50ms]
        
        subgraph L3[L3: DurableTier&lt;B, I&gt;<br/>Slow • Unlimited]
            BlobStore[BlobStore Trait<br/>S3 / MinIO / Ceph]
            IndexStore[IndexStore Trait<br/>DynamoDB / CockroachDB]
            BlobStore -.-> IndexStore
        end
    end
    
    Origin[Origin Server]
    
    Client -->|HTTP Request| Pingora
    Pingora -->|Lookup L0| L0
    L0 -.->|Miss| L1
    L1 -.->|Miss| L2
    L2 -.->|Miss| L3
    L3 -.->|Miss| Origin
    
    L0 -->|Hit: Return| Pingora
    L1 -->|Hit: Return + Promote?| Pingora
    L2 -->|Hit: Return + Promote?| Pingora
    L3 -->|Hit: Return + Promote?| Pingora
    Origin -->|Response| Pingora
    
    Pingora -->|Fanout Write<br/>on Miss| L0
    Pingora -->|Fanout Write<br/>on Miss| L1
    Pingora -->|Fanout Write<br/>on Miss| L2
    Pingora -->|Fanout Write<br/>on Miss| L3
    
    Pingora -->|HTTP Response| Client
    
    style L0 fill:#90EE90
    style L1 fill:#87CEEB
    style L2 fill:#DDA0DD
    style L3 fill:#F08080
    style BlobStore fill:#FFB6C6
    style IndexStore fill:#FFB6C6
    style Pingora fill:#FFD700
